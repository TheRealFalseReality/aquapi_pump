text_sensor: 
  # AquaPi Version
  - platform: template
    name: "AquaPi Pump Version"
    id: aquapi_version
    icon: mdi:update
    update_interval: 600s
    lambda: |-
      return {"${app_version}"};
    entity_category: "diagnostic"

  # GitHub Project URL
  - platform: template
    name: GitHub
    id: github
    icon: mdi:github
    lambda: |-
      return {"github.com/TheRealFalseReality/aquapi"};
    entity_category: "diagnostic"

api:
  services:
    - service: start_pump
      variables: 
        address: int
      then:
        - ezo_pmp.dose_continuously:
            id: !lambda 'return address;'
    - service: stop_pump
      variables: 
        address: int
      then:
        - ezo_pmp.stop_dosing:
            id: !lambda 'return address;'
            
# TODO Add General Pump command service
  # # Send EZO Command - Custom
  # - platform: template
  #   name: EZO - Send Custom Command
  #   id: send_custom
  #   entity_category: "Config"
  #   on_press:
  #     then:
  #       - lambda: |-
  #           id(commmand_custom).state;
# TODO Add General I2C Address Change
#   services:
#     - service: start_pump
#       variables: 
#         address: int
#       then:
#         - ezo_pmp.dose_continuously:
#             id: !lambda 'return address;'
#     - service: stop_pump
#       variables: 
#         address: int
#       then:
#         - ezo_pmp.stop_dosing:
#             id: !lambda 'return address;'